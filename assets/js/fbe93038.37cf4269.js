"use strict";(self.webpackChunkactix_website=self.webpackChunkactix_website||[]).push([[8432],{4534:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return p},metadata:function(){return d},toc:function(){return u}});var i=n(7462),s=n(3366),a=(n(7294),n(3905)),o=n(2536),r=["components"],p={title:"Testing"},l="Testing",d={unversionedId:"testing",id:"testing",title:"Testing",description:"Every application should be well tested. Actix Web provides tools to perform unit and integration tests.",source:"@site/docs/testing.md",sourceDirName:".",slug:"/testing",permalink:"/actix-website/docs/testing",draft:!1,editUrl:"https://github.com/actix/actix-website/docs/testing.md",tags:[],version:"current",frontMatter:{title:"Testing"},sidebar:"docs",previous:{title:"Responses",permalink:"/actix-website/docs/response"},next:{title:"Middleware",permalink:"/actix-website/docs/middleware"}},c={},u=[{value:"Unit Tests",id:"unit-tests",level:2},{value:"Integration tests",id:"integration-tests",level:2},{value:"Stream response tests",id:"stream-response-tests",level:2}],m={toc:u};function k(e){var t=e.components,n=(0,s.Z)(e,r);return(0,a.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"testing"},"Testing"),(0,a.kt)("p",null,"Every application should be well tested. Actix Web provides tools to perform unit and integration tests."),(0,a.kt)("h2",{id:"unit-tests"},"Unit Tests"),(0,a.kt)("p",null,"For unit testing, actix-web provides a request builder type. ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/test/struct.TestRequest.html"},(0,a.kt)("em",{parentName:"a"},"TestRequest"))," implements a builder-like pattern. You can generate a ",(0,a.kt)("inlineCode",{parentName:"p"},"HttpRequest")," instance with ",(0,a.kt)("inlineCode",{parentName:"p"},"to_http_request()")," and call your handler with it."),(0,a.kt)(o.Z,{example:"testing",file:"main.rs",section:"unit-tests",mdxType:"CodeBlock"}),(0,a.kt)("h2",{id:"integration-tests"},"Integration tests"),(0,a.kt)("p",null,"There are a few methods for testing your application. Actix Web can be used to run the application with specific handlers in a real HTTP server."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TestRequest::get()"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"TestRequest::post()")," and other methods can be used to send requests to the test server."),(0,a.kt)("p",null,"To create a ",(0,a.kt)("inlineCode",{parentName:"p"},"Service")," for testing, use the ",(0,a.kt)("inlineCode",{parentName:"p"},"test::init_service")," method which accepts a regular ",(0,a.kt)("inlineCode",{parentName:"p"},"App")," builder."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Check the ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/test/index.html"},"API documentation")," for more information.")),(0,a.kt)(o.Z,{example:"testing",file:"integration_one.rs",section:"integration-one",mdxType:"CodeBlock"}),(0,a.kt)("p",null,"If you need more complex application configuration, testing should be very similar to creating the normal application. For example, you may need to initialize application state. Create an ",(0,a.kt)("inlineCode",{parentName:"p"},"App")," with a ",(0,a.kt)("inlineCode",{parentName:"p"},"data")," method and attach state just like you would from a normal application."),(0,a.kt)(o.Z,{example:"testing",file:"integration_two.rs",section:"integration-two",mdxType:"CodeBlock"}),(0,a.kt)("h2",{id:"stream-response-tests"},"Stream response tests"),(0,a.kt)("p",null,"If you need to test stream generation, it would be enough to call ",(0,a.kt)("inlineCode",{parentName:"p"},"take_body()")," and convert a resulting ",(0,a.kt)("a",{parentName:"p",href:"https://docs.rs/actix-web/4/actix_web/body/enum.ResponseBody.html"},(0,a.kt)("em",{parentName:"a"},"ResponseBody"))," into a future and execute it, for example when testing ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events"},(0,a.kt)("em",{parentName:"a"},"Server Sent Events")),"."),(0,a.kt)(o.Z,{example:"testing",file:"stream_response.rs",section:"stream-response",mdxType:"CodeBlock"}))}k.isMDXComponent=!0}}]);