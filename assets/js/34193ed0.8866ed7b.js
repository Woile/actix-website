"use strict";(self.webpackChunkactix_website=self.webpackChunkactix_website||[]).push([[1427],{5333:function(e,t,i){i.r(t),i.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return d}});var r=i(7462),n=i(3366),o=(i(7294),i(3905)),a=["components"],c={title:"Connection Lifecycle"},s="Architecture overview",l={unversionedId:"conn_lifecycle",id:"conn_lifecycle",title:"Connection Lifecycle",description:"After Server has started listening to all sockets, Accept and Worker are two main loops responsible for processing incoming client connections.",source:"@site/docs/conn_lifecycle.md",sourceDirName:".",slug:"/conn_lifecycle",permalink:"/actix-website/docs/conn_lifecycle",draft:!1,editUrl:"https://github.com/actix/actix-website/edit/master/docs/conn_lifecycle.md",tags:[],version:"current",frontMatter:{title:"Connection Lifecycle"},sidebar:"docs",previous:{title:"HTTP Server Initialization",permalink:"/actix-website/docs/http_server_init"}},p={},d=[{value:"Accept loop in more detail",id:"accept-loop-in-more-detail",level:2},{value:"Worker loop in more detail",id:"worker-loop-in-more-detail",level:2},{value:"Request loop roughly",id:"request-loop-roughly",level:2}],m={toc:d};function u(e){var t=e.components,c=(0,n.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},m,c,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"architecture-overview"},"Architecture overview"),(0,o.kt)("p",null,"After Server has started listening to all sockets, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-net/blob/master/actix-server/src/accept.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Accept"))," and ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-net/blob/master/actix-server/src/worker.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Worker"))," are two main loops responsible for processing incoming client connections."),(0,o.kt)("p",null,"Once connection accepted Application level protocol processing happens in a protocol specific ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-web/blob/master/actix-http/src/h1/dispatcher.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Dispatcher"))," loop spawned from ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-net/blob/master/actix-server/src/worker.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Worker")),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Please note, below diagrams are outlining happy-path scenarios only.\n")),(0,o.kt)("p",null,(0,o.kt)("img",{src:i(5507).Z,width:"1090",height:"766"})),(0,o.kt)("h2",{id:"accept-loop-in-more-detail"},"Accept loop in more detail"),(0,o.kt)("p",null,(0,o.kt)("img",{src:i(2137).Z,width:"850",height:"807"})),(0,o.kt)("p",null,"Most of code implementation resides in ",(0,o.kt)("a",{parentName:"p",href:"https://crates.io/crates/actix-server"},(0,o.kt)("inlineCode",{parentName:"a"},"actix-server"))," crate for struct ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-net/blob/master/actix-server/src/accept.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Accept")),"."),(0,o.kt)("h2",{id:"worker-loop-in-more-detail"},"Worker loop in more detail"),(0,o.kt)("p",null,(0,o.kt)("img",{src:i(785).Z,width:"1050",height:"884"})),(0,o.kt)("p",null,"Most of code implementation resides in ",(0,o.kt)("a",{parentName:"p",href:"https://crates.io/crates/actix-server"},(0,o.kt)("inlineCode",{parentName:"a"},"actix-server"))," crate for struct ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/actix/actix-net/blob/master/actix-server/src/worker.rs"},(0,o.kt)("inlineCode",{parentName:"a"},"Worker")),"."),(0,o.kt)("h2",{id:"request-loop-roughly"},"Request loop roughly"),(0,o.kt)("p",null,(0,o.kt)("img",{src:i(4159).Z,width:"1250",height:"743"})),(0,o.kt)("p",null,"Most of code implementation for request loop resides in ",(0,o.kt)("a",{parentName:"p",href:"https://crates.io/crates/actix-web"},(0,o.kt)("inlineCode",{parentName:"a"},"actix-web"))," and ",(0,o.kt)("a",{parentName:"p",href:"https://crates.io/crates/actix-http"},(0,o.kt)("inlineCode",{parentName:"a"},"actix-http"))," crates."))}u.isMDXComponent=!0},2137:function(e,t,i){t.Z=i.p+"assets/images/connection_accept-71d2b913dba510316a3123c2dc824c53.svg"},5507:function(e,t,i){t.Z=i.p+"assets/images/connection_overview-97766f50097ec4e7457e88ddf4a55f8b.svg"},4159:function(e,t,i){t.Z=i.p+"assets/images/connection_request-9dbd9333b5f99acf894184ad52124364.svg"},785:function(e,t,i){t.Z=i.p+"assets/images/connection_worker-716c9ff05de68638add7d3178c503637.svg"}}]);